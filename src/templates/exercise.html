{% extends "base.html" %}

{% block style %}
<link href="/static/css/editor.css" rel="stylesheet">
{% endblock %}

{% block body %}

{% include "header.html" %}

<div class="exercise row">

    <!-- Meta-data about the exercise, to be used by JS -->
    <div id="exercise" data-id="{{exercise.id}}" data-boilerplate-code="{{exercise.boilerplate_code}}" ></div>

    <div class="col-md-8">
        <!-- Text editor -->


        <div id="editor" class="code-area"></div>


        <button class="btn btn-submit pull-right" id="test-button">Test</button>

    </div>

    <div class="col-md-4">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs">
          <li class="active"><a href="#description" data-toggle="tab">Description</a></li>
          {% if user.editor %}
          <li><a href="#tests" data-toggle="tab">Tests</a></li>
          {% endif %}
          <li><a href="#output" data-toggle="tab">Output</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">

          <div class="tab-pane active " id="description">

          <h3>{{exercise.title}}</h3>

<div class="description">
{{exercise.description}}
</div>
          </div>

          {% if user.editor %}
          <div class="tab-pane" id="tests">
            Tests here
          </div>
          {% endif %}

          <div class="tab-pane output" id="output">
            No output
          </div>


        </div>


    </div>

</div>

<!-- Compilation / Execution output's template -->
{% raw %}
<script id="output-template" type="text/x-handlebars-template">

  {{#if compilation_error}}

    <h4>Compilation error</h4>
    <div class="alert label-danger">
        {{breaklines compilation_log}}
    </div>

  {{else}}

    <h4>Test results</h4>
    <ul class="tests">
        {{#each test_results}}
        {{#if passed}}
          <li class="alert label-success">
            Test n&deg;{{@index}}: Passed in {{fixedDecimal cpu_time}} seconds.
          </li>
        {{else}}
          <li class="alert label-danger">
            Test n&deg;{{@index}}: {{report}}
          </li>
        {{/if}}

        {{/each}}
    </ul>

  {{/if}}

</script>
{% endraw %}

{% endblock body %}


{% block javascript %}
<script src="/static/js/ace/ace.js"></script>
<script src="/static/js/editor.js"></script>
{% endblock %}
